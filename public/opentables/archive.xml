<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd" https="false">
<meta>
    <author>Capt. Proton</author>
    <description>Searches archive.org for media metadata</description>
    <documentationURL>none</documentationURL>
    <sampleQuery>select * from {table} where q='title:(sector) AND creator:(dice media group)' and output='rss';</sampleQuery>
</meta>
<bindings>
    <select itemPath="" produces="XML">
        <urls>
            <url>http://www.archive.org/advancedsearch.php</url>
        </urls>
        <inputs>
            <key id="q" type="xs:string" paramType="query"/>
            <key id="output" type="xs:string" paramType="query"/>
        </inputs>
		<execute><![CDATA[

			default xml namespace = "http://search.yahoo.com/mrss/";
			var xml = request.get().response,//call the url defined above

			 	//channel = <channel></channel>,//prep the output object
				item = null,//individual item in xml obj. used in loop below.
				superenclosure = null;//superenclosure of quake.  used in loop below

			for each(item in xml.channel.item){
				superenclosure =
					item.title//eg M 3.0, Puerto Rico region

					.split(' ')[1]//eg --> 3.0,
					.replace(',', '');//eg --> 3.0

				item.appendChild( <superenclosure>{superenclosure}</superenclosure> );
				items.appendChild(item);

			}
			response.object = items;
		]]></execute>

    </select>

</bindings>
</table>
