<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd" https="false">
<meta>
    <author>Capt. Proton</author>
    <description>Searches archive.org for media metadata</description>
    <documentationURL>none</documentationURL>
    <sampleQuery>select * from {table} where q='title:(sector) AND creator:(dice media group)' and output='rss';</sampleQuery>
</meta>
<bindings>
    <select itemPath="" produces="JSON">
        <urls>
            <url>http://www.archive.org/advancedsearch.php</url>
        </urls>
        <inputs>
            <key id="q" type="xs:string" paramType="query"/>
            <key id="output" type="xs:string" paramType="query"/>
        </inputs>
            <execute><![CDATA[
            y.include("http://paul.donnelly.org/js/json2.js");            
            var pdata = JSON.parse(data);
            for (var i = 0; i < pdata.items.length; i++) {
		pdata.items[i].yindex = i;
	    }
            response.object = pdata;
            ]]>
            </execute>

    </select>

</bindings>
</table>
